(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{237:function(a,s,t){"use strict";t.r(s);var e=t(28),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"nginx日志切割-手动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx日志切割-手动"}},[a._v("#")]),a._v(" nginx日志切割-手动")]),a._v(" "),t("h2",{attrs:{id:"_1-创建一个shell可执行日志文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建一个shell可执行日志文件"}},[a._v("#")]),a._v(" 1.创建一个shell可执行日志文件")]),a._v(" "),t("h3",{attrs:{id:"_1-1进入-usr-local-nginx-sbin-目录下创建cut-my-log-sh，内容如下："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1进入-usr-local-nginx-sbin-目录下创建cut-my-log-sh，内容如下："}},[a._v("#")]),a._v(" 1.1进入/usr/local/nginx/sbin/目录下创建cut_my_log.sh，内容如下：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('#!/bin/bash\nLOG_PATH="/var/log/nginx/"\nRECORD_TIME=$(date -d "yesterday" +%Y-%m-%d+%H:%M)\nPID=/var/run/nginx/nginx.pid\nmv ${LOG_PATH}/access.log ${LOG_PATH}/access.${RECORD_TIME}.log\nmv ${LOG_PATH}/error.log ${LOG_PATH}/error.${RECORD_TIME}.log\n\n# 向Nginx主进程发送信息，用于重新打开日志文件\nkill -USR1 `cat $PID`\n')])])]),t("h2",{attrs:{id:"_2-为cut-my-log-sh添加可执行的权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-为cut-my-log-sh添加可执行的权限"}},[a._v("#")]),a._v(" 2.为cut_my_log.sh添加可执行的权限")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("chmod +x cut_my_log.sh\n")])])]),t("h2",{attrs:{id:"_3-测试日志切割后的结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-测试日志切割后的结果"}},[a._v("#")]),a._v(" 3.测试日志切割后的结果")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./cut_my_log.sh\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);