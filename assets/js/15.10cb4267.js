(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{215:function(e,a,t){"use strict";t.r(a);var n=t(28),s=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_2-配置keepalived主和从"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置keepalived主和从"}},[e._v("#")]),e._v(" 2.配置Keepalived主和从")]),e._v(" "),t("h2",{attrs:{id:"_1-配置keepalived-主"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置keepalived-主"}},[e._v("#")]),e._v(" 1.配置Keepalived - 主")]),e._v(" "),t("h3",{attrs:{id:"_1-1通过命令-vim-keepalived-conf打开配置文件，文件位置-etc-keepalived文件夹下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1通过命令-vim-keepalived-conf打开配置文件，文件位置-etc-keepalived文件夹下"}},[e._v("#")]),e._v(" 1.1通过命令 "),t("code",[e._v("vim keepalived.conf")]),e._v("打开配置文件，文件位置/etc/keepalived文件夹下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("global_defs {\n   # 路由id：当前安装keepalived节点主机的标识符，全局唯一标识符\n   router_id keep_192.168.64.131\n}\n\n# 计算机节点\nvrrp_instance VI_1 {\n    # 表示的状态，当前的192.168.64.131的nginx的主节点\n    # 主节点：MASTER,备用机：BACKUP\n    state MASTER\n    # 当前实例绑定的网卡\n    interface ens33\n    # 保证主备节点一致\n    virtual_router_id 51\n    # 优先级/权重，谁的优先级高，在MASTER挂掉以后，就能成为MASTER\n    priority 100\n    # 主备之间同步检查的时间间隔，默认1s\n    advert_int 1\n    # 认证授权的密码，防止非法节点的进入\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.64.121\n    }\n}\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[e._v("ip addr 命令可以查看自己的ip和网卡地址")])]),e._v(" "),t("h3",{attrs:{id:"_1-2启动keepalived"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2启动keepalived"}},[e._v("#")]),e._v(" 1.2启动Keepalived")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 进去启动目录\ncd /usr/local/keeplived/sbin\n\n# 启动\n./keepalived\n\n# 查看进程\nps -ef|grep keepalived\n\n# 查看虚拟ip\nip addr\n")])])]),t("h2",{attrs:{id:"_2-配置keepalived-从"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置keepalived-从"}},[e._v("#")]),e._v(" 2.配置Keepalived - 从")]),e._v(" "),t("h3",{attrs:{id:"_2-1通过命令-vim-keepalived-conf打开配置文件，文件位置-etc-keepalived文件夹下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1通过命令-vim-keepalived-conf打开配置文件，文件位置-etc-keepalived文件夹下"}},[e._v("#")]),e._v(" 2.1通过命令 "),t("code",[e._v("vim keepalived.conf")]),e._v("打开配置文件，文件位置/etc/keepalived文件夹下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("global_defs {\n   # 路由id：当前安装keepalived节点主机的标识符，全局唯一标识符\n   router_id keep_192.168.64.132\n}\n\n# 计算机节点\nvrrp_instance VI_1 {\n    # 表示的状态，当前的192.168.64.131的nginx的主节点\n    # 主节点：MASTER,备用机：BACKUP\n    state BACKUP\n    # 当前实例绑定的网卡\n    interface ens33\n    # 保证主备节点一致\n    virtual_router_id 51\n    # 优先级/权重，谁的优先级高，在MASTER挂掉以后，就能成为MASTER\n    priority 80\n    # 主备之间同步检查的时间间隔，默认1s\n    advert_int 1\n    # 认证授权的密码，防止非法节点的进入\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    virtual_ipaddress {\n        192.168.64.121\n    }\n}\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),t("p",[e._v("ip addr 命令可以查看自己的ip和网卡地址")])]),e._v(" "),t("h3",{attrs:{id:"_2-2启动keepalived"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2启动keepalived"}},[e._v("#")]),e._v(" 2.2启动Keepalived")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# 进去启动目录\ncd /usr/local/keeplived/sbin\n\n# 启动\n./keepalived\n\n# 查看进程\nps -ef|grep keepalived\n\n# 查看虚拟ip\nip addr\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);