(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{248:function(t,s,a){"use strict";a.r(s);var e=a(28),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nginx中负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx中负载均衡"}},[t._v("#")]),t._v(" nginx中负载均衡")]),t._v(" "),a("h2",{attrs:{id:"_1-负载均衡ip-hash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-负载均衡ip-hash"}},[t._v("#")]),t._v(" 1.负载均衡"),a("code",[t._v("ip_hash")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("upstream tomcats {\n\tip_hash;\n\t\n\tserver 192.168.64.130:8080;\n\tserver 192.168.64.131:8080 down;\n\tserver 192.168.64.132:8080;\n}\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("ip_hash可以保证用户访问可以请求到上游服务器中的固定的服务器，前提是用户ip没有发生更改。")])]),t._v(" "),a("h2",{attrs:{id:"_2-负载均衡url-hash-与least-conn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-负载均衡url-hash-与least-conn"}},[t._v("#")]),t._v(" 2.负载均衡"),a("code",[t._v("url_hash")]),t._v(" 与"),a("code",[t._v("least_conn")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("upstream tomcats {\n\t# url_hash\n\thash $request_uri;\n\t# 最少连接数\n\t# least_conn\n\t\n\tserver 192.168.64.130:8080;\n\tserver 192.168.64.131:8080;\n\tserver 192.168.64.132:8080;\n}\n\nserver {\n\tlisten 80;\n\tserver_name www.tomcats.com;\n\t\n\tlocation / {\n\t\tproxy_pass http://tomcats;\n\t}\n}\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("根据每次请求的url地址，hash后访问到固定的服务器节点。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);